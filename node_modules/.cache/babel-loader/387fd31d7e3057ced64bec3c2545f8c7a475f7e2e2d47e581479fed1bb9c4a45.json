{"ast":null,"code":"import{Box,Button,FormControl,InputLabel,MenuItem,Select,TextField,Typography}from'@mui/material';import{useEffect,useRef,useState}from'react';import{DragDropContext,Draggable,Droppable}from'react-beautiful-dnd';import{useNavigate,useParams}from'react-router-dom';import useBrands from'@/hooks/shopping/useBrands';import usePostCreateProduct from'@/hooks/shopping/usePostCreateProduct';import usePostUploadFiles from'@/hooks/upload/useUploadFiles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ProductCreatePage=()=>{const{mutateAsync:create}=usePostCreateProduct();const{mutateAsync:upload}=usePostUploadFiles();const{id}=useParams();const navigate=useNavigate();const{data:brands}=useBrands();const fileInputRef=useRef(null);const detailFileInputRef=useRef(null);const[selectedFiles,setSelectedFiles]=useState(null);const[selectedDetailFiles,setSelectedDetailFiles]=useState(null);const[imagePreviews,setImagePreviews]=useState([]);const[detailImagePreviews,setDetailImagePreviews]=useState([]);const handleFileChange=(event,type)=>{const files=event.target.files;if(files){const fileURLs=Array.from(files).map(file=>URL.createObjectURL(file));if(type==='normal'){setSelectedFiles(files);setImagePreviews(fileURLs);}else{setSelectedDetailFiles(files);setDetailImagePreviews(fileURLs);}}};useEffect(()=>{return()=>{imagePreviews.forEach(url=>URL.revokeObjectURL(url));detailImagePreviews.forEach(url=>URL.revokeObjectURL(url));};},[imagePreviews,detailImagePreviews]);const reorder=(list,startIndex,endIndex)=>{const result=Array.from(list);const[removed]=result.splice(startIndex,1);result.splice(endIndex,0,removed);return result;};// 드래그 후 순서 변경 핸들러\nconst onDragEnd=(result,type)=>{if(!result.destination){return;}if(type==='normal'){const reorderedImages=reorder(imagePreviews,result.source.index,result.destination.index);setImagePreviews(reorderedImages);}else{const reorderedDetailImages=reorder(detailImagePreviews,result.source.index,result.destination.index);setDetailImagePreviews(reorderedDetailImages);}};// 이미지 업로드 함수\nconst uploadImages=async files=>{if(files){try{const filesArray=Array.from(files);const data=await upload(filesArray);alert('이미지 업로드 완료');return data.images.map(image=>image.id);}catch(error){alert('이미지 업로드 중 에러가 발생했습니다.');}}return undefined;};// 상품 정보 상태 관리\nconst[productData,setProductData]=useState({userId:1,shopId:Number(id),brandId:0,name:'',price:0,summary:'',description:'',imageIds:[],detailImageIds:[]});const handleChange=e=>{const{name,value}=e.target;setProductData({...productData,[name]:value});};// 상품 생성 처리\nconst handleCreate=async()=>{try{// 이미지 업로드 및 ID 설정을 한번에 처리\nconst[imageIds,detailImageIds]=await Promise.all([uploadImages(selectedFiles),uploadImages(selectedDetailFiles)]);if(!imageIds||!detailImageIds){throw new Error('이미지 업로드에 실패했습니다.');}// 상품 생성 API 호출\nawait create({...productData,imageIds,detailImageIds});alert('상품이 성공적으로 생성되었습니다.');navigate(-1);}catch(error){console.error('Error creating product:',error);alert('상품 생성 중 에러가 발생했습니다.');}};return/*#__PURE__*/_jsxs(Box,{sx:{padding:'20px',display:'flex',flexDirection:'column',gap:'15px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:\"Create Product\"}),/*#__PURE__*/_jsx(TextField,{label:\"User ID\",type:\"number\",name:\"userId\",value:productData.userId,onChange:handleChange,fullWidth:true}),/*#__PURE__*/_jsx(TextField,{label:\"Shop ID\",type:\"number\",name:\"shopId\",value:productData.shopId,onChange:handleChange,fullWidth:true}),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"\\uBE0C\\uB79C\\uB4DC\"}),/*#__PURE__*/_jsx(Select,{value:productData.brandId.toString(),label:\"\\uBE0C\\uB79C\\uB4DC\",name:\"brandId\",onChange:e=>setProductData({...productData,brandId:Number(e.target.value)}),children:brands===null||brands===void 0?void 0:brands.map(brand=>/*#__PURE__*/_jsx(MenuItem,{value:brand.id,children:brand.name},brand.id))})]}),/*#__PURE__*/_jsx(TextField,{label:\"Product Name\",name:\"name\",value:productData.name,onChange:handleChange,fullWidth:true}),/*#__PURE__*/_jsx(TextField,{label:\"Price\",type:\"number\",name:\"price\",value:productData.price,onChange:handleChange,fullWidth:true}),/*#__PURE__*/_jsx(TextField,{label:\"Summary\",name:\"summary\",value:productData.summary,onChange:handleChange,fullWidth:true}),/*#__PURE__*/_jsx(TextField,{label:\"Description\",name:\"description\",value:productData.description,onChange:handleChange,multiline:true,rows:4,fullWidth:true}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"\\uC77C\\uBC18 \\uC774\\uBBF8\\uC9C0 \\uC5C5\\uB85C\\uB4DC\"}),/*#__PURE__*/_jsx(\"input\",{id:\"imageInput\",type:\"file\",onChange:e=>handleFileChange(e,'normal'),multiple:true,ref:fileInputRef}),/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:result=>onDragEnd(result,'normal'),children:/*#__PURE__*/_jsx(Droppable,{droppableId:\"normalImages\",direction:\"horizontal\",children:provided=>/*#__PURE__*/_jsxs(\"div\",{...provided.droppableProps,ref:provided.innerRef,style:{display:'flex',gap:'10px',overflow:'auto'},children:[imagePreviews.map((src,index)=>/*#__PURE__*/_jsx(Draggable,{draggableId:src,index:index,children:provided=>/*#__PURE__*/_jsx(\"img\",{src:src,alt:\"preview-\".concat(index),width:\"100px\",ref:provided.innerRef,...provided.draggableProps,...provided.dragHandleProps})},src)),provided.placeholder]})})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"\\uC138\\uBD80 \\uC774\\uBBF8\\uC9C0 \\uC5C5\\uB85C\\uB4DC\"}),/*#__PURE__*/_jsx(\"input\",{id:\"detailImageInput\",type:\"file\",onChange:e=>handleFileChange(e,'detail'),multiple:true,ref:detailFileInputRef}),/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:result=>onDragEnd(result,'detail'),children:/*#__PURE__*/_jsx(Droppable,{droppableId:\"detailImages\",direction:\"vertical\",children:provided=>/*#__PURE__*/_jsxs(\"div\",{...provided.droppableProps,ref:provided.innerRef,style:{display:'flex',flexDirection:'column',gap:'10px',maxHeight:'400px',overflowY:'auto'},children:[detailImagePreviews.map((src,index)=>/*#__PURE__*/_jsx(Draggable,{draggableId:src,index:index,children:provided=>/*#__PURE__*/_jsx(\"img\",{src:src,alt:\"detail-preview-\".concat(index),width:\"100px\",ref:provided.innerRef,...provided.draggableProps,...provided.dragHandleProps})},src)),provided.placeholder]})})}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleCreate,children:\"Create Product\"})]});};export default ProductCreatePage;","map":{"version":3,"names":["Box","Button","FormControl","InputLabel","MenuItem","Select","TextField","Typography","useEffect","useRef","useState","DragDropContext","Draggable","Droppable","useNavigate","useParams","useBrands","usePostCreateProduct","usePostUploadFiles","jsx","_jsx","jsxs","_jsxs","ProductCreatePage","mutateAsync","create","upload","id","navigate","data","brands","fileInputRef","detailFileInputRef","selectedFiles","setSelectedFiles","selectedDetailFiles","setSelectedDetailFiles","imagePreviews","setImagePreviews","detailImagePreviews","setDetailImagePreviews","handleFileChange","event","type","files","target","fileURLs","Array","from","map","file","URL","createObjectURL","forEach","url","revokeObjectURL","reorder","list","startIndex","endIndex","result","removed","splice","onDragEnd","destination","reorderedImages","source","index","reorderedDetailImages","uploadImages","filesArray","alert","images","image","error","undefined","productData","setProductData","userId","shopId","Number","brandId","name","price","summary","description","imageIds","detailImageIds","handleChange","e","value","handleCreate","Promise","all","Error","console","sx","padding","display","flexDirection","gap","children","variant","label","onChange","fullWidth","toString","brand","multiline","rows","multiple","ref","droppableId","direction","provided","droppableProps","innerRef","style","overflow","src","draggableId","alt","concat","width","draggableProps","dragHandleProps","placeholder","maxHeight","overflowY","color","onClick"],"sources":["/Users/hano/dev/snu/iot/iot-final/src/pages/shopping/ProductCreatePage.tsx"],"sourcesContent":["import { Box, Button, FormControl, InputLabel, MenuItem, Select, SelectChangeEvent, TextField, Typography } from '@mui/material'\nimport { useEffect, useRef, useState } from 'react'\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd'\nimport { useNavigate, useParams } from 'react-router-dom'\n\nimport { PostCreateProductType } from '@/apis/shopping/postCreateProduct'\nimport useBrands from '@/hooks/shopping/useBrands'\nimport usePostCreateProduct from '@/hooks/shopping/usePostCreateProduct'\nimport usePostUploadFiles from '@/hooks/upload/useUploadFiles'\n\nconst ProductCreatePage = () => {\n  const { mutateAsync: create } = usePostCreateProduct()\n  const { mutateAsync: upload } = usePostUploadFiles()\n  const { id } = useParams()\n  const navigate = useNavigate()\n  const { data: brands } = useBrands()\n\n  const fileInputRef = useRef<HTMLInputElement>(null)\n  const detailFileInputRef = useRef<HTMLInputElement>(null)\n\n  const [selectedFiles, setSelectedFiles] = useState<FileList | null>(null)\n  const [selectedDetailFiles, setSelectedDetailFiles] = useState<FileList | null>(null)\n\n  const [imagePreviews, setImagePreviews] = useState<string[]>([])\n  const [detailImagePreviews, setDetailImagePreviews] = useState<string[]>([])\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>, type: 'normal' | 'detail') => {\n    const files = event.target.files\n    if (files) {\n      const fileURLs = Array.from(files).map((file) => URL.createObjectURL(file))\n      if (type === 'normal') {\n        setSelectedFiles(files)\n        setImagePreviews(fileURLs)\n      } else {\n        setSelectedDetailFiles(files)\n        setDetailImagePreviews(fileURLs)\n      }\n    }\n  }\n\n  useEffect(() => {\n    return () => {\n      imagePreviews.forEach((url) => URL.revokeObjectURL(url))\n      detailImagePreviews.forEach((url) => URL.revokeObjectURL(url))\n    }\n  }, [imagePreviews, detailImagePreviews])\n\n  const reorder = (list: string[], startIndex: number, endIndex: number) => {\n    const result = Array.from(list)\n    const [removed] = result.splice(startIndex, 1)\n    result.splice(endIndex, 0, removed)\n    return result\n  }\n\n  // 드래그 후 순서 변경 핸들러\n  const onDragEnd = (result: any, type: 'normal' | 'detail') => {\n    if (!result.destination) {\n      return\n    }\n    if (type === 'normal') {\n      const reorderedImages = reorder(imagePreviews, result.source.index, result.destination.index)\n      setImagePreviews(reorderedImages)\n    } else {\n      const reorderedDetailImages = reorder(detailImagePreviews, result.source.index, result.destination.index)\n      setDetailImagePreviews(reorderedDetailImages)\n    }\n  }\n\n  // 이미지 업로드 함수\n  const uploadImages = async (files: FileList | null): Promise<number[] | undefined> => {\n    if (files) {\n      try {\n        const filesArray = Array.from(files)\n        const data = await upload(filesArray)\n        alert('이미지 업로드 완료')\n        return data.images.map((image: { id: number }) => image.id)\n      } catch (error) {\n        alert('이미지 업로드 중 에러가 발생했습니다.')\n      }\n    }\n    return undefined\n  }\n\n  // 상품 정보 상태 관리\n  const [productData, setProductData] = useState<PostCreateProductType>({\n    userId: 1,\n    shopId: Number(id),\n    brandId: 0,\n    name: '',\n    price: 0,\n    summary: '',\n    description: '',\n    imageIds: [],\n    detailImageIds: []\n  })\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target\n    setProductData({ ...productData, [name]: value })\n  }\n\n  // 상품 생성 처리\n  const handleCreate = async () => {\n    try {\n      // 이미지 업로드 및 ID 설정을 한번에 처리\n      const [imageIds, detailImageIds] = await Promise.all([\n        uploadImages(selectedFiles),\n        uploadImages(selectedDetailFiles)\n      ])\n\n      if (!imageIds || !detailImageIds) {\n        throw new Error('이미지 업로드에 실패했습니다.')\n      }\n\n      // 상품 생성 API 호출\n      await create({\n        ...productData,\n        imageIds,\n        detailImageIds\n      })\n\n      alert('상품이 성공적으로 생성되었습니다.')\n      navigate(-1)\n\n    } catch (error) {\n      console.error('Error creating product:', error)\n      alert('상품 생성 중 에러가 발생했습니다.')\n    }\n  }\n\n  return (\n    <Box sx={{ padding: '20px', display: 'flex', flexDirection: 'column', gap: '15px' }}>\n      <Typography variant=\"h4\">Create Product</Typography>\n\n      <TextField\n        label=\"User ID\"\n        type=\"number\"\n        name=\"userId\"\n        value={productData.userId}\n        onChange={handleChange}\n        fullWidth\n      />\n\n      <TextField\n        label=\"Shop ID\"\n        type=\"number\"\n        name=\"shopId\"\n        value={productData.shopId}\n        onChange={handleChange}\n        fullWidth\n      />\n\n      <FormControl fullWidth>\n        <InputLabel>브랜드</InputLabel>\n        <Select\n          value={productData.brandId.toString()}\n          label=\"브랜드\"\n          name=\"brandId\"\n          onChange={(e: SelectChangeEvent) => setProductData({ ...productData, brandId: Number(e.target.value) })}\n        >\n          {brands?.map((brand) => (\n            <MenuItem\n              key={brand.id}\n              value={brand.id}>\n              {brand.name}\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n\n      <TextField\n        label=\"Product Name\"\n        name=\"name\"\n        value={productData.name}\n        onChange={handleChange}\n        fullWidth\n      />\n\n      <TextField\n        label=\"Price\"\n        type=\"number\"\n        name=\"price\"\n        value={productData.price}\n        onChange={handleChange}\n        fullWidth\n      />\n\n      <TextField\n        label=\"Summary\"\n        name=\"summary\"\n        value={productData.summary}\n        onChange={handleChange}\n        fullWidth\n      />\n\n      <TextField\n        label=\"Description\"\n        name=\"description\"\n        value={productData.description}\n        onChange={handleChange}\n        multiline\n        rows={4}\n        fullWidth\n      />\n\n      {/* 일반 이미지 파일 업로드 */}\n      <Typography variant=\"h6\">일반 이미지 업로드</Typography>\n      <input\n        id=\"imageInput\"\n        type=\"file\"\n        onChange={(e) => handleFileChange(e, 'normal')}\n        multiple\n        ref={fileInputRef}\n      />\n\n      <DragDropContext onDragEnd={(result) => onDragEnd(result, 'normal')}>\n        <Droppable\n          droppableId=\"normalImages\"\n          direction=\"horizontal\">\n          {(provided) => (\n            <div\n              {...provided.droppableProps}\n              ref={provided.innerRef}\n              style={{ display: 'flex', gap: '10px', overflow: 'auto' }}\n            >\n              {imagePreviews.map((src, index) => (\n                <Draggable\n                  key={src}\n                  draggableId={src}\n                  index={index}>\n                  {(provided) => (\n                    <img\n                      src={src}\n                      alt={`preview-${index}`}\n                      width=\"100px\"\n                      ref={provided.innerRef}\n                      {...provided.draggableProps}\n                      {...provided.dragHandleProps}\n                    />\n                  )}\n                </Draggable>\n              ))}\n              {provided.placeholder}\n            </div>\n          )}\n        </Droppable>\n      </DragDropContext>\n\n      {/* 세부 이미지 파일 업로드 */}\n      <Typography variant=\"h6\">세부 이미지 업로드</Typography>\n      <input\n        id=\"detailImageInput\"\n        type=\"file\"\n        onChange={(e) => handleFileChange(e, 'detail')}\n        multiple\n        ref={detailFileInputRef}\n      />\n\n      <DragDropContext onDragEnd={(result) => onDragEnd(result, 'detail')}>\n        <Droppable\n          droppableId=\"detailImages\"\n          direction=\"vertical\">\n          {(provided) => (\n            <div\n              {...provided.droppableProps}\n              ref={provided.innerRef}\n              style={{ display: 'flex', flexDirection: 'column', gap: '10px', maxHeight: '400px', overflowY: 'auto' }}\n            >\n              {detailImagePreviews.map((src, index) => (\n                <Draggable\n                  key={src}\n                  draggableId={src}\n                  index={index}>\n                  {(provided) => (\n                    <img\n                      src={src}\n                      alt={`detail-preview-${index}`}\n                      width=\"100px\"\n                      ref={provided.innerRef}\n                      {...provided.draggableProps}\n                      {...provided.dragHandleProps}\n                    />\n                  )}\n                </Draggable>\n              ))}\n              {provided.placeholder}\n            </div>\n          )}\n        </Droppable>\n      </DragDropContext>\n\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={handleCreate}\n      >\n        Create Product\n      </Button>\n    </Box>\n  )\n}\n\nexport default ProductCreatePage\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}