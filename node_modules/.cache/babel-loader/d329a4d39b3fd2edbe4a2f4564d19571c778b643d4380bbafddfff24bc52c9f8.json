{"ast":null,"code":"import{Box,Button,CircularProgress,TextField,Typography}from'@mui/material';import{useEffect,useState}from'react';import{useNavigate,useParams}from'react-router-dom';import useShop from'@/hooks/shopping/useShop';import useUpdateShop from'@/hooks/shopping/useUpdateShop';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ShopRevisePage=()=>{const{id}=useParams();const navigate=useNavigate();const{data:shop,isLoading}=useShop(Number(id));const{mutateAsync:updateShop}=useUpdateShop();const[name,setName]=useState('');const[deliveryFee,setDeliveryFee]=useState(0);const[freeDeliveryThreshold,setFreeDeliveryThreshold]=useState(0);useEffect(()=>{if(shop){setName(shop.name);setDeliveryFee(shop.deliveryFee);setFreeDeliveryThreshold(shop.freeDeliveryThreshold);}},[shop]);if(isLoading){return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',height:'100vh'},children:/*#__PURE__*/_jsx(CircularProgress,{})});}if(!shop){return/*#__PURE__*/_jsx(Box,{sx:{padding:'20px',textAlign:'center'},children:/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:\"Shop not found\"})});}async function revise(){try{await updateShop({shopId:Number(id),data:{name,deliveryFee,freeDeliveryThreshold}});alert('수정 완료');navigate(-1);}catch(e){alert(\"\\uC5D0\\uB7EC \\uBC1C\\uC0DD \".concat(e));}}return/*#__PURE__*/_jsxs(Box,{sx:{padding:'20px',display:'flex',flexDirection:'column',gap:'20px'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:\"Shop Edit\"}),/*#__PURE__*/_jsx(TextField,{label:\"\\uC0C1\\uC810 \\uC774\\uB984\",variant:\"outlined\",value:name,onChange:e=>setName(e.target.value),fullWidth:true}),/*#__PURE__*/_jsx(TextField,{label:\"\\uBC30\\uC1A1\\uBE44\",type:\"number\",variant:\"outlined\",value:deliveryFee,onChange:e=>setDeliveryFee(Number(e.target.value)),fullWidth:true}),/*#__PURE__*/_jsx(TextField,{label:\"\\uBB34\\uB8CC\\uBC30\\uC1A1 \\uAE30\\uC900\\uAE08\\uC561\",type:\"number\",variant:\"outlined\",value:freeDeliveryThreshold,onChange:e=>setFreeDeliveryThreshold(Number(e.target.value)),fullWidth:true}),/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:'10px'},children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:revise,fullWidth:true,children:\"\\uC218\\uC815\\uD558\\uAE30\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>navigate(-1),fullWidth:true,children:\"\\uCDE8\\uC18C\"})]})]});};export default ShopRevisePage;","map":{"version":3,"names":["Box","Button","CircularProgress","TextField","Typography","useEffect","useState","useNavigate","useParams","useShop","useUpdateShop","jsx","_jsx","jsxs","_jsxs","ShopRevisePage","id","navigate","data","shop","isLoading","Number","mutateAsync","updateShop","name","setName","deliveryFee","setDeliveryFee","freeDeliveryThreshold","setFreeDeliveryThreshold","sx","display","justifyContent","alignItems","height","children","padding","textAlign","variant","revise","shopId","alert","e","concat","flexDirection","gap","label","value","onChange","target","fullWidth","type","color","onClick"],"sources":["/Users/hano/dev/snu/iot/iot-final/src/pages/shopping/ShopRevisePage.tsx"],"sourcesContent":["import { Box, Button, CircularProgress, TextField, Typography } from '@mui/material'\nimport { useEffect, useState } from 'react'\nimport { useNavigate, useParams } from 'react-router-dom'\n\nimport useShop from '@/hooks/shopping/useShop'\nimport useUpdateShop from '@/hooks/shopping/useUpdateShop'\n\nconst ShopRevisePage = () => {\n  const { id } = useParams()\n  const navigate = useNavigate()\n  const { data: shop, isLoading } = useShop(Number(id))\n  const { mutateAsync: updateShop } = useUpdateShop()\n\n  const [name, setName] = useState<string>('')\n  const [deliveryFee, setDeliveryFee] = useState<number>(0)\n  const [freeDeliveryThreshold, setFreeDeliveryThreshold] = useState<number>(0)\n\n  useEffect(() => {\n    if (shop) {\n      setName(shop.name)\n      setDeliveryFee(shop.deliveryFee)\n      setFreeDeliveryThreshold(shop.freeDeliveryThreshold)\n    }\n  }, [shop])\n\n  if (isLoading) {\n    return (\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '100vh' }}>\n        <CircularProgress />\n      </Box>\n    )\n  }\n\n  if (!shop) {\n    return (\n      <Box sx={{ padding: '20px', textAlign: 'center' }}>\n        <Typography variant=\"h5\">Shop not found</Typography>\n      </Box>\n    )\n  }\n\n  async function revise() {\n    try {\n      await updateShop({\n        shopId: Number(id),\n        data: {\n          name,\n          deliveryFee,\n          freeDeliveryThreshold\n        }\n      })\n      alert('수정 완료')\n      navigate(-1)\n    } catch (e) {\n      alert(`에러 발생 ${e}`)\n    }\n  }\n\n  return (\n    <Box sx={{ padding: '20px', display: 'flex', flexDirection: 'column', gap: '20px' }}>\n      <Typography variant=\"h4\">Shop Edit</Typography>\n\n      <TextField\n        label=\"상점 이름\"\n        variant=\"outlined\"\n        value={name}\n        onChange={(e) => setName(e.target.value)}\n        fullWidth\n      />\n\n      <TextField\n        label=\"배송비\"\n        type=\"number\"\n        variant=\"outlined\"\n        value={deliveryFee}\n        onChange={(e) => setDeliveryFee(Number(e.target.value))}\n        fullWidth\n      />\n\n      <TextField\n        label=\"무료배송 기준금액\"\n        type=\"number\"\n        variant=\"outlined\"\n        value={freeDeliveryThreshold}\n        onChange={(e) => setFreeDeliveryThreshold(Number(e.target.value))}\n        fullWidth\n      />\n\n      <Box sx={{ display: 'flex', gap: '10px' }}>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={revise}\n          fullWidth\n        >\n          수정하기\n        </Button>\n        <Button\n          variant=\"outlined\"\n          onClick={() => navigate(-1)}\n          fullWidth\n        >\n          취소\n        </Button>\n      </Box>\n    </Box>\n  )\n}\n\nexport default ShopRevisePage\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}