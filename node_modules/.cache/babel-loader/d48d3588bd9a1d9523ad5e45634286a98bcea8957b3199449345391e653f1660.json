{"ast":null,"code":"import{Button,CircularProgress,Switch,TableCell,TableRow}from'@mui/material';import{useState}from'react';import{useNavigate}from'react-router-dom';import useDeletePostFilter from'@/hooks/post/useDeletePostFilter';import usePatchPostFilter from'@/hooks/post/usePatchPostFilter';import usePostFilters from'@/hooks/post/usePostFilters';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const PostFilterPage=()=>{const{data:filters,isLoading,refetch}=usePostFilters();const navigate=useNavigate();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uAE00 \\uD544\\uD130\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>navigate('create'),children:\"\\uC0DD\\uC131\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',alignItems:'center'},children:isLoading?/*#__PURE__*/_jsx(CircularProgress,{}):filters===null||filters===void 0?void 0:filters.map(filter=>/*#__PURE__*/_jsx(PostFilter,{refresh:()=>refetch(),filter:filter},filter.id))})]});};export default PostFilterPage;const PostFilter=_ref=>{let{filter,refresh}=_ref;const{mutate:patchTeahouseFilter}=usePatchPostFilter();const{mutate:deleteFilter}=useDeletePostFilter();const[show,setShow]=useState(filter.show);const[edit,setEdit]=useState(false);const handleSwitchChange=async()=>{try{await patchTeahouseFilter({...filter,show:!show});setShow(!show);refresh();}catch(e){console.log(e);}};return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:filter.id}),/*#__PURE__*/_jsx(TableCell,{children:filter.category}),/*#__PURE__*/_jsx(TableCell,{children:filter.title}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Switch,{checked:show,onChange:handleSwitchChange})}),/*#__PURE__*/_jsx(TableCell,{children:filter.priority}),/*#__PURE__*/_jsxs(TableCell,{children:[/*#__PURE__*/_jsx(Button,{onClick:async()=>{await deleteFilter({id:filter.id});refresh();},children:\"\\uC0AD\\uC81C\"}),!edit&&/*#__PURE__*/_jsx(Button,{onClick:()=>setEdit(true),children:\"\\uC218\\uC815\"}),edit&&/*#__PURE__*/_jsx(Button,{onClick:()=>setEdit(false),children:\"\\uC644\\uB8CC\"})]})]});};","map":{"version":3,"names":["Button","CircularProgress","Switch","TableCell","TableRow","useState","useNavigate","useDeletePostFilter","usePatchPostFilter","usePostFilters","jsx","_jsx","jsxs","_jsxs","PostFilterPage","data","filters","isLoading","refetch","navigate","children","onClick","style","display","flexDirection","alignItems","map","filter","PostFilter","refresh","id","_ref","mutate","patchTeahouseFilter","deleteFilter","show","setShow","edit","setEdit","handleSwitchChange","e","console","log","category","title","checked","onChange","priority"],"sources":["/Users/hano/dev/daru/daru-admin/src/pages/post/PostFilterPage.tsx"],"sourcesContent":["import { Button, CircularProgress, Switch, TableCell, TableRow } from '@mui/material'\nimport { useState } from 'react'\nimport { useNavigate } from 'react-router-dom'\n\nimport { PostFilterModel } from '@/apis/post/getPostFilters'\nimport useDeletePostFilter from '@/hooks/post/useDeletePostFilter'\nimport usePatchPostFilter from '@/hooks/post/usePatchPostFilter'\nimport usePostFilters from '@/hooks/post/usePostFilters'\n\nconst PostFilterPage = () => {\n  const { data: filters, isLoading, refetch } = usePostFilters()\n  const navigate = useNavigate()\n  return (\n    <div>\n      <h1>글 필터</h1>\n      <Button onClick={() => navigate('create')}>생성</Button>\n      <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n        {(isLoading) ? <CircularProgress /> : filters?.map((filter) => (<PostFilter\n          key={filter.id}\n          refresh={() => refetch()}\n          filter={filter} />))}\n      </div>\n    </div>\n  )\n}\nexport default PostFilterPage\n\ntype PostFilterProps = { filter: PostFilterModel; refresh: () => void };\nconst PostFilter = ({ filter, refresh }: PostFilterProps) => {\n  const { mutate: patchTeahouseFilter } = usePatchPostFilter()\n  const { mutate: deleteFilter } = useDeletePostFilter()\n  const [show, setShow] = useState(filter.show)\n  const [edit, setEdit] = useState(false)\n\n  const handleSwitchChange = async () => {\n    try {\n      await patchTeahouseFilter({ ...filter, show: !show })\n      setShow(!show)\n      refresh()\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  return (\n    <TableRow>\n      <TableCell>{filter.id}</TableCell>\n      <TableCell>{filter.category}</TableCell>\n      <TableCell>{filter.title}</TableCell>\n      <TableCell>\n        <Switch\n          checked={show}\n          onChange={handleSwitchChange}\n        />\n      </TableCell>\n      <TableCell>{filter.priority}</TableCell>\n      <TableCell>\n        <Button onClick={async () => {\n          await deleteFilter({ id: filter.id })\n          refresh()\n        }}>삭제</Button>\n        {(!edit) && <Button onClick={() => setEdit(true)}>수정</Button>}\n        {(edit) && <Button onClick={() => setEdit(false)}>완료</Button>}\n      </TableCell>\n    </TableRow>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}